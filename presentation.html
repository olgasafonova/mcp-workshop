<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MCP Workshop - Presentation</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .presentation {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .slide-wrapper {
      position: relative;
      width: 1920px;
      height: 1080px;
      transform-origin: center center;
    }

    .slide-wrapper iframe {
      width: 1920px;
      height: 1080px;
      border: none;
      display: block;
    }

    /* Progress bar - minimal, at very bottom */
    .progress {
      position: fixed;
      bottom: 0;
      left: 0;
      height: 3px;
      background: #E53935;
      transition: width 0.3s ease;
      z-index: 1000;
    }

    /* Overview mode */
    .overview {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #1a1a1a;
      display: none;
      overflow-y: auto;
      padding: 40px;
      z-index: 2000;
    }

    .overview.active {
      display: block;
    }

    .overview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .overview-slide {
      aspect-ratio: 16/9;
      background: #333;
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
    }

    .overview-slide:hover {
      transform: scale(1.03);
      box-shadow: 0 8px 32px rgba(0,0,0,0.5);
    }

    .overview-slide.current {
      outline: 3px solid #E53935;
    }

    .overview-slide iframe {
      width: 1920px;
      height: 1080px;
      transform-origin: top left;
      pointer-events: none;
      border: none;
    }

    .overview-slide-number {
      position: absolute;
      bottom: 8px;
      right: 10px;
      color: #fff;
      font-size: 12px;
      font-weight: 600;
      background: rgba(0,0,0,0.7);
      padding: 2px 8px;
      border-radius: 4px;
    }

    /* Help text - only visible on hover, very subtle */
    .help {
      position: fixed;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      color: #333;
      font-size: 11px;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }

    body:hover .help {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="presentation">
    <div class="slide-wrapper" id="slide-wrapper">
      <iframe id="slide-frame" src=""></iframe>
    </div>
  </div>

  <div class="progress" id="progress"></div>
  <div class="help">← → navigate · ESC overview · F fullscreen</div>

  <div class="overview" id="overview">
    <div class="overview-grid" id="overview-grid"></div>
  </div>

  <script>
    const SLIDES = [
      'slides/slide-01-title.html',
      'slides/slide-02-problem.html',
      'slides/slide-03-rag-vs-mcp.html',
      'slides/slide-04-what-mcp-is.html',
      'slides/slide-05-three-parts.html',
      'slides/slide-06-what-servers-provide.html',
      'slides/slide-07-cloud-vs-local.html',
      'slides/slide-08-tier2-intro.html',
      'slides/slide-08b-get-claude-desktop.html',
      'slides/slide-09-demo-gleif.html',
      'slides/slide-10-demo-playwright.html',
      'slides/slide-11-config.html',
      'slides/slide-11b-install-gleif.html',
      'slides/slide-12-tier3-intro.html',
      'slides/slide-13-architecture.html',
      'slides/slide-14-patterns.html',
      'slides/slide-15-getting-started.html',
      'slides/slide-16-takeaways.html',
      'slides/slide-17-testimonial.html',
      'slides/slide-18-resources.html',
      'slides/slide-19-thankyou.html',
    ];

    let currentSlide = 0;
    let overviewMode = false;

    const frame = document.getElementById('slide-frame');
    const wrapper = document.getElementById('slide-wrapper');
    const progress = document.getElementById('progress');
    const overview = document.getElementById('overview');
    const overviewGrid = document.getElementById('overview-grid');

    // Scale slide to fit viewport while maintaining 16:9
    function scaleSlide() {
      const vw = window.innerWidth;
      const vh = window.innerHeight;

      // Calculate scale to fit 1920x1080 into viewport
      const scaleX = vw / 1920;
      const scaleY = vh / 1080;
      const scale = Math.min(scaleX, scaleY);

      wrapper.style.transform = `scale(${scale})`;
    }

    function showSlide(index) {
      if (index < 0) index = 0;
      if (index >= SLIDES.length) index = SLIDES.length - 1;

      currentSlide = index;
      frame.src = SLIDES[index];

      // Update progress
      const pct = ((index + 1) / SLIDES.length) * 100;
      progress.style.width = pct + '%';

      // Update overview selection
      document.querySelectorAll('.overview-slide').forEach((el, i) => {
        el.classList.toggle('current', i === index);
      });
    }

    function nextSlide() {
      showSlide(currentSlide + 1);
    }

    function prevSlide() {
      showSlide(currentSlide - 1);
    }

    function toggleOverview() {
      overviewMode = !overviewMode;
      overview.classList.toggle('active', overviewMode);

      if (overviewMode) {
        const current = document.querySelector('.overview-slide.current');
        if (current) {
          current.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      }
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    // Build overview grid with proper scaling
    function buildOverview() {
      SLIDES.forEach((slide, i) => {
        const div = document.createElement('div');
        div.className = 'overview-slide' + (i === 0 ? ' current' : '');

        // Calculate scale for thumbnail (fit 1920x1080 into ~280px wide container)
        const thumbScale = 280 / 1920;

        div.innerHTML = `
          <iframe src="${slide}" loading="lazy" style="transform: scale(${thumbScale})"></iframe>
          <div class="overview-slide-number">${i + 1}</div>
        `;
        div.addEventListener('click', () => {
          showSlide(i);
          toggleOverview();
        });
        overviewGrid.appendChild(div);
      });
    }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (overviewMode && e.key === 'Escape') {
        toggleOverview();
        return;
      }

      switch (e.key) {
        case 'ArrowRight':
        case 'ArrowDown':
        case ' ':
        case 'PageDown':
          e.preventDefault();
          if (overviewMode) toggleOverview();
          nextSlide();
          break;
        case 'ArrowLeft':
        case 'ArrowUp':
        case 'PageUp':
          e.preventDefault();
          if (overviewMode) toggleOverview();
          prevSlide();
          break;
        case 'Escape':
          toggleOverview();
          break;
        case 'f':
        case 'F':
          toggleFullscreen();
          break;
        case 'Home':
          showSlide(0);
          break;
        case 'End':
          showSlide(SLIDES.length - 1);
          break;
      }
    });

    // Touch/swipe support
    let touchStartX = 0;
    document.addEventListener('touchstart', (e) => {
      touchStartX = e.touches[0].clientX;
    });
    document.addEventListener('touchend', (e) => {
      const touchEndX = e.changedTouches[0].clientX;
      const diff = touchStartX - touchEndX;
      if (Math.abs(diff) > 50) {
        if (diff > 0) nextSlide();
        else prevSlide();
      }
    });

    // Click navigation (left half = back, right half = forward)
    document.querySelector('.presentation').addEventListener('click', (e) => {
      if (overviewMode) return;
      const clickX = e.clientX / window.innerWidth;
      if (clickX > 0.5) nextSlide();
      else prevSlide();
    });

    // Handle resize
    window.addEventListener('resize', scaleSlide);
    document.addEventListener('fullscreenchange', () => {
      setTimeout(scaleSlide, 100);
    });

    // Initialize
    buildOverview();
    scaleSlide();
    showSlide(0);
  </script>
</body>
</html>
